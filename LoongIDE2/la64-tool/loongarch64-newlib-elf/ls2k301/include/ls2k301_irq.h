/*
 * Copyright (C) 2021-2025 Suzhou Tiancheng Software Inc. All Rights Reserved.
 *
 */
/*
 * ls2k301_irq.h
 *
 * created: 2024-06-07
 *  author: Bian
 */

/*
 * TODO 使用向量中断
 */

#ifndef _LS2K301_IRQ_H
#define _LS2K301_IRQ_H

#include "ls2k301.h"

/**************************************************************************************************
 * Loongarch64 Vector numbers for exception. This is a direct map to the ESTAT.
 **************************************************************************************************/

#define LA_EXCEPTION_BASE           0

#define LA_EXCEPTION_INT            LA_EXCEPTION_BASE+0     // 仅当CSR.ECFG.VS=0时, 表示是中断
#define LA_EXCEPTION_PIL            LA_EXCEPTION_BASE+1     // load  操作页无效例外
#define LA_EXCEPTION_PIS            LA_EXCEPTION_BASE+2     // store 操作页无效例外
#define LA_EXCEPTION_PIF            LA_EXCEPTION_BASE+3     // 取指操作页无效例外
#define LA_EXCEPTION_PME            LA_EXCEPTION_BASE+4     // 页修改例外
#define LA_EXCEPTION_PNR            LA_EXCEPTION_BASE+5     // 页不可读例外
#define LA_EXCEPTION_PNX            LA_EXCEPTION_BASE+6     // 页不可执行例外
#define LA_EXCEPTION_PPI            LA_EXCEPTION_BASE+7     // 页特权等级不合规例外
#define LA_EXCEPTION_ADEF_ADEM      LA_EXCEPTION_BASE+8     // subcode=0: 取指地址错例外/subcode=1: 访存指令地址错例外
#define LA_EXCEPTION_ALE            LA_EXCEPTION_BASE+9     // 地址非对齐例外
#define LA_EXCEPTION_BCE            LA_EXCEPTION_BASE+10    // 边界约束检查错例外
#define LA_EXCEPTION_SYSCALL        LA_EXCEPTION_BASE+11    // 系统调用例外
#define LA_EXCEPTION_BREAK          LA_EXCEPTION_BASE+12    // 断点例外
#define LA_EXCEPTION_INE            LA_EXCEPTION_BASE+13    // 指令不存在例外
#define LA_EXCEPTION_IPE            LA_EXCEPTION_BASE+14    // 指令特权等级错例外
#define LA_EXCEPTION_FPD            LA_EXCEPTION_BASE+15    // 浮点指令未使能例外
#define LA_EXCEPTION_SXD            LA_EXCEPTION_BASE+16    // 128位向量扩展指令未使能例外
#define LA_EXCEPTION_ASXD           LA_EXCEPTION_BASE+17    // 256位向量扩展指令未使能例外
#define LA_EXCEPTION_FPE_VFPE       LA_EXCEPTION_BASE+18    // subcode=0: 基础浮点指令例外/subcode=1: 向量浮点指令例外
#define LA_EXCEPTION_WPEF_WPEM      LA_EXCEPTION_BASE+19    // subcode=0: 取指监测点例外/subcode=1: load/store操作监测点例外
#define LA_EXCEPTION_BTD            LA_EXCEPTION_BASE+20    // 二进制翻译扩展指令未使能例外
#define LA_EXCEPTION_BTE            LA_EXCEPTION_BASE+21    // 二进制翻译相关例外
#define LA_EXCEPTION_GSPR           LA_EXCEPTION_BASE+22    // 客户机敏感特权资源例外
#define LA_EXCEPTION_HVC            LA_EXCEPTION_BASE+23    // 虚拟机监控调用例外
#define LA_EXCEPTION_GCSC_GCHC      LA_EXCEPTION_BASE+24    // subcode=0: 客户机CSR软件修改例外/ subcode=1: 客户机CSR硬件修改例外

/*0x1A-0x3E 保留 */

#define LA_INTERRUPT_BASE           LA_EXCEPTION_BASE+64    // 64

/**************************************************************************************************
 * Interrupt Vector Numbers
 * Loongarch64 LA_INTERRUPT_BASE should be 64 (0x40)
 **************************************************************************************************/

/*
 * Loongarch64 ECFG (0x4)  LIP bit(12:0)=IPI, TI, PMI, HWI[7:0], SWI[1:0]
 *             ESTAT(0x5)  IS  bit(12:0) if interrupt, status bit equal 1
 *
 */
#define LS2K301_IRQ_SW0             (LA_INTERRUPT_BASE+0)   // 软中断 SWI0~SWI1
#define LS2K301_IRQ_SW1             (LA_INTERRUPT_BASE+1)
#define LS2K301_IRQ_HW0             (LA_INTERRUPT_BASE+2)   // 硬中断 HWI0~HWI7
#define LS2K301_IRQ_HW1             (LA_INTERRUPT_BASE+3)
#define LS2K301_IRQ_HW2             (LA_INTERRUPT_BASE+4)
#define LS2K301_IRQ_HW3             (LA_INTERRUPT_BASE+5)
#define LS2K301_IRQ_HW4             (LA_INTERRUPT_BASE+6)
#define LS2K301_IRQ_HW5             (LA_INTERRUPT_BASE+7)
#define LS2K301_IRQ_HW6             (LA_INTERRUPT_BASE+8)
#define LS2K301_IRQ_HW7             (LA_INTERRUPT_BASE+9)
#define LS2K301_IRQ_PERF            (LA_INTERRUPT_BASE+10)  // 性能监测计数溢出中断
#define LS2K301_IRQ_TIMER           (LA_INTERRUPT_BASE+11)  // 定时器中断
#define LS2K301_IRQ_IPI             (LA_INTERRUPT_BASE+12)  // 核间中断

#if (!USE_EXTINT)   /* 使用传统中断 */

/**************************************************************************************************
 * 使用系统传统中断模式, 共支持64个中断
 **************************************************************************************************/
 
/*
 * Interrupt Control 0 Interrupts
 */
#define LS2K301_IRQ0_BASE           (LA_INTERRUPT_BASE+16)      // 80

#define INTC0_UART0_IRQ				(LS2K301_IRQ0_BASE+0)
#define INTC0_UART1_IRQ				(LS2K301_IRQ0_BASE+1)
#define INTC0_UART_2_5_IRQ			(LS2K301_IRQ0_BASE+2)
#define INTC0_UART_6_9_IRQ			(LS2K301_IRQ0_BASE+3)
#define INTC0_I2C_0_1_IRQ			(LS2K301_IRQ0_BASE+4)
#define INTC0_I2C_2_3_IRQ			(LS2K301_IRQ0_BASE+5)
#define INTC0_SPI2_IRQ				(LS2K301_IRQ0_BASE+6)
#define INTC0_SPI3_IRQ				(LS2K301_IRQ0_BASE+7)
#define INTC0_CAN0_IRQ				(LS2K301_IRQ0_BASE+8)
#define INTC0_CAN1_IRQ				(LS2K301_IRQ0_BASE+9)
#define INTC0_CAN2_IRQ				(LS2K301_IRQ0_BASE+10)
#define INTC0_CAN3_IRQ				(LS2K301_IRQ0_BASE+11)
#define INTC0_I2S_IRQ				(LS2K301_IRQ0_BASE+12)
#define INTC0_ATIMER_IRQ			(LS2K301_IRQ0_BASE+13)
#define INTC0_GTIMER_IRQ			(LS2K301_IRQ0_BASE+14)
#define INTC0_BTIMER_IRQ			(LS2K301_IRQ0_BASE+15)
#define INTC0_PWM_0_1_IRQ			(LS2K301_IRQ0_BASE+16)
#define INTC0_PWM_2_3_IRQ			(LS2K301_IRQ0_BASE+17)
#define INTC0_ADC_IRQ				(LS2K301_IRQ0_BASE+18)
#define INTC0_HPET0_IRQ				(LS2K301_IRQ0_BASE+19)
#define INTC0_HPET1_IRQ				(LS2K301_IRQ0_BASE+20)
#define INTC0_HPET2_IRQ				(LS2K301_IRQ0_BASE+21)
#define INTC0_HPET3_IRQ				(LS2K301_IRQ0_BASE+22)
#define INTC0_DMA0_IRQ				(LS2K301_IRQ0_BASE+23)
#define INTC0_DMA1_IRQ				(LS2K301_IRQ0_BASE+24)
#define INTC0_DMA2_IRQ				(LS2K301_IRQ0_BASE+25)
#define INTC0_DMA3_IRQ				(LS2K301_IRQ0_BASE+26)
#define INTC0_DMA4_IRQ				(LS2K301_IRQ0_BASE+27)
#define INTC0_DMA5_IRQ				(LS2K301_IRQ0_BASE+28)
#define INTC0_DMA6_IRQ				(LS2K301_IRQ0_BASE+29)
#define INTC0_DMA7_IRQ				(LS2K301_IRQ0_BASE+30)
#define INTC0_SDIO0_IRQ				(LS2K301_IRQ0_BASE+31)

/*
 * Interrupt Control 1 Interrupts
 */
#define LS2K301_IRQ1_BASE           (LS2K301_IRQ0_BASE+32)      // 112

#define INTC1_SDIO1_IRQ				(LS2K301_IRQ1_BASE+0)
#define INTC1_SDIO0_DMA_IRQ			(LS2K301_IRQ1_BASE+1)
#define INTC1_SDIO1_DMA_IRQ			(LS2K301_IRQ1_BASE+2)
#define INTC1_ENCRYPT_DMA_IRQ		(LS2K301_IRQ1_BASE+3)
#define INTC1_AES_IRQ				(LS2K301_IRQ1_BASE+4)
#define INTC1_DES_IRQ				(LS2K301_IRQ1_BASE+5)
#define INTC1_SM3_IRQ				(LS2K301_IRQ1_BASE+6)
#define INTC1_SM4_IRQ				(LS2K301_IRQ1_BASE+7)
#define INTC1_RTC_IRQ				(LS2K301_IRQ1_BASE+8)
#define INTC1_TOY_IRQ				(LS2K301_IRQ1_BASE+9)
#define INTC1_RTC_TICK_IRQ			(LS2K301_IRQ1_BASE+10)
#define INTC1_TOY_TICK_IRQ			(LS2K301_IRQ1_BASE+11)
#define INTC1_SPI0_IRQ				(LS2K301_IRQ1_BASE+12)
#define INTC1_SPI1_IRQ				(LS2K301_IRQ1_BASE+13)
#define INTC1_EHCI_IRQ				(LS2K301_IRQ1_BASE+14)
#define INTC1_OHCI_IRQ				(LS2K301_IRQ1_BASE+15)
#define INTC1_OTG_IRQ				(LS2K301_IRQ1_BASE+16)
#define INTC1_GMAC0_IRQ				(LS2K301_IRQ1_BASE+17)
#define INTC1_GMAC1_IRQ				(LS2K301_IRQ1_BASE+18)
#define INTC1_DC_IRQ				(LS2K301_IRQ1_BASE+19)
#define INTC1_THSENS_IRQ			(LS2K301_IRQ1_BASE+20)
#define INTC1_GPIO_0_15_IRQ			(LS2K301_IRQ1_BASE+21)
#define INTC1_GPIO_16_31_IRQ		(LS2K301_IRQ1_BASE+22)
#define INTC1_GPIO_32_47_IRQ		(LS2K301_IRQ1_BASE+23)
#define INTC1_GPIO_48_63_IRQ		(LS2K301_IRQ1_BASE+24)
#define INTC1_GPIO_64_79_IRQ		(LS2K301_IRQ1_BASE+25)
#define INTC1_GPIO_80_95_IRQ		(LS2K301_IRQ1_BASE+26)
#define INTC1_GPIO_96_105_IRQ		(LS2K301_IRQ1_BASE+27)
#define INTC1_DDR_ECC0_IRQ			(LS2K301_IRQ1_BASE+29)
#define INTC1_DDR_ECC1_IRQ			(LS2K301_IRQ1_BASE+30)

#define LS2K301_IRQ_COUNT           (LS2K301_IRQ1_BASE+32)      // 传统中断总数

#else   /* 使用扩展中断 */

/**************************************************************************************************
 * 使用系统扩展断模式, 共支持128个中断
 **************************************************************************************************/

#define LS2K301_EXTIRQ0_BASE        (LA_INTERRUPT_BASE+16)      // 80

#define EXTI0_UART0_IRQ				(LS2K301_EXTIRQ0_BASE+0)
#define EXTI0_UART1_IRQ				(LS2K301_EXTIRQ0_BASE+1)
#define EXTI0_UART2_IRQ				(LS2K301_EXTIRQ0_BASE+2)
#define EXTI0_UART3_IRQ				(LS2K301_EXTIRQ0_BASE+3)
#define EXTI0_UART4_IRQ				(LS2K301_EXTIRQ0_BASE+4)
#define EXTI0_UART5_IRQ				(LS2K301_EXTIRQ0_BASE+5)
#define EXTI0_UART6_IRQ				(LS2K301_EXTIRQ0_BASE+6)
#define EXTI0_UART7_IRQ				(LS2K301_EXTIRQ0_BASE+7)
#define EXTI0_UART8_IRQ				(LS2K301_EXTIRQ0_BASE+8)
#define EXTI0_UART9_IRQ				(LS2K301_EXTIRQ0_BASE+9)
#define EXTI0_I2C0_IRQ				(LS2K301_EXTIRQ0_BASE+10)
#define EXTI0_I2C1_IRQ				(LS2K301_EXTIRQ0_BASE+11)
#define EXTI0_I2C2_IRQ				(LS2K301_EXTIRQ0_BASE+12)
#define EXTI0_I2C3_IRQ				(LS2K301_EXTIRQ0_BASE+13)
#define EXTI0_SPI2_IRQ				(LS2K301_EXTIRQ0_BASE+14)
#define EXTI0_SPI3_IRQ				(LS2K301_EXTIRQ0_BASE+15)
#define EXTI0_CAN0_CORE_IRQ			(LS2K301_EXTIRQ0_BASE+16)
#define EXTI0_CAN0_BUF_IRQ			(LS2K301_EXTIRQ0_BASE+17)
#define EXTI0_CAN1_CORE_IRQ			(LS2K301_EXTIRQ0_BASE+18)
#define EXTI0_CAN1_BUF_IRQ			(LS2K301_EXTIRQ0_BASE+19)
#define EXTI0_CAN2_CORE_IRQ			(LS2K301_EXTIRQ0_BASE+20)
#define EXTI0_CAN2_BUF_IRQ			(LS2K301_EXTIRQ0_BASE+21)
#define EXTI0_CAN3_CORE_IRQ			(LS2K301_EXTIRQ0_BASE+22)
#define EXTI0_CAN3_BUF_IRQ			(LS2K301_EXTIRQ0_BASE+23)
#define EXTI0_I2S_IRQ				(LS2K301_EXTIRQ0_BASE+24)
#define EXTI0_ATIMER_IRQ			(LS2K301_EXTIRQ0_BASE+25)
#define EXTI0_GTIMER_IRQ			(LS2K301_EXTIRQ0_BASE+26)
#define EXTI0_BTIMER_IRQ			(LS2K301_EXTIRQ0_BASE+27)
#define EXTI0_PWM0_IRQ				(LS2K301_EXTIRQ0_BASE+28)
#define EXTI0_PWM1_IRQ				(LS2K301_EXTIRQ0_BASE+29)
#define EXTI0_PWM2_IRQ				(LS2K301_EXTIRQ0_BASE+30)
#define EXTI0_PWM3_IRQ				(LS2K301_EXTIRQ0_BASE+31)

#define LS2K301_EXTIRQ1_BASE        (LS2K301_EXTIRQ0_BASE+32)   // 112

#define EXTI1_ADC_IRQ				(LS2K301_EXTIRQ1_BASE+32-32)
#define EXTI1_HPET0_0_IRQ			(LS2K301_EXTIRQ1_BASE+33-32)
#define EXTI1_HPET0_1_IRQ			(LS2K301_EXTIRQ1_BASE+34-32)
#define EXTI1_HPET0_2_IRQ			(LS2K301_EXTIRQ1_BASE+35-32)
#define EXTI1_HPET1_0_IRQ			(LS2K301_EXTIRQ1_BASE+36-32)
#define EXTI1_HPET1_1_IRQ			(LS2K301_EXTIRQ1_BASE+37-32)
#define EXTI1_HPET1_2_IRQ			(LS2K301_EXTIRQ1_BASE+38-32)
#define EXTI1_HPET2_0_IRQ			(LS2K301_EXTIRQ1_BASE+39-32)
#define EXTI1_HPET2_1_IRQ			(LS2K301_EXTIRQ1_BASE+40-32)
#define EXTI1_HPET2_2_IRQ			(LS2K301_EXTIRQ1_BASE+41-32)
#define EXTI1_HPET3_0_IRQ			(LS2K301_EXTIRQ1_BASE+42-32)
#define EXTI1_HPET3_1_IRQ			(LS2K301_EXTIRQ1_BASE+43-32)
#define EXTI1_HPET3_2_IRQ			(LS2K301_EXTIRQ1_BASE+44-32)
#define EXTI1_DMA0_IRQ				(LS2K301_EXTIRQ1_BASE+45-32)
#define EXTI1_DMA1_IRQ				(LS2K301_EXTIRQ1_BASE+46-32)
#define EXTI1_DMA2_IRQ				(LS2K301_EXTIRQ1_BASE+47-32)
#define EXTI1_DMA3_IRQ				(LS2K301_EXTIRQ1_BASE+48-32)
#define EXTI1_DMA4_IRQ				(LS2K301_EXTIRQ1_BASE+49-32)
#define EXTI1_DMA5_IRQ				(LS2K301_EXTIRQ1_BASE+50-32)
#define EXTI1_DMA6_IRQ				(LS2K301_EXTIRQ1_BASE+51-32)
#define EXTI1_DMA7_IRQ				(LS2K301_EXTIRQ1_BASE+52-32)
#define EXTI1_SDIO0_CTRL_IRQ		(LS2K301_EXTIRQ1_BASE+53-32)
#define EXTI1_SDIO1_CTRL_IRQ		(LS2K301_EXTIRQ1_BASE+54-32)
#define EXTI1_SDIO0_DMA_IRQ			(LS2K301_EXTIRQ1_BASE+55-32)
#define EXTI1_SDIO1_DMA_IRQ			(LS2K301_EXTIRQ1_BASE+56-32)
#define EXTI1_ENCRYPT_DMA_IRQ		(LS2K301_EXTIRQ1_BASE+57-32)
#define EXTI1_AES_IRQ				(LS2K301_EXTIRQ1_BASE+58-32)
#define EXTI1_DES_IRQ				(LS2K301_EXTIRQ1_BASE+59-32)
#define EXTI1_SM3_IRQ				(LS2K301_EXTIRQ1_BASE+60-32)
#define EXTI1_SM4_IRQ				(LS2K301_EXTIRQ1_BASE+61-32)
#define EXTI1_RTC_0_IRQ				(LS2K301_EXTIRQ1_BASE+62-32)
#define EXTI1_RTC_1_IRQ				(LS2K301_EXTIRQ1_BASE+63-32)

#define LS2K301_EXTIRQ2_BASE        (LS2K301_EXTIRQ1_BASE+32)   // 144

#define EXTI2_RTC_2_IRQ				(LS2K301_EXTIRQ2_BASE+64-64)
#define EXTI2_TOY_0_IRQ				(LS2K301_EXTIRQ2_BASE+65-64)
#define EXTI2_TOY_1_IRQ				(LS2K301_EXTIRQ2_BASE+66-64)
#define EXTI2_TOY_2_IRQ				(LS2K301_EXTIRQ2_BASE+67-64)
#define EXTI2_RTC_TICK_IRQ			(LS2K301_EXTIRQ2_BASE+68-64)
#define EXTI2_TOY_TICK_IRQ			(LS2K301_EXTIRQ2_BASE+69-64)
#define EXTI2_SPI0_IRQ				(LS2K301_EXTIRQ2_BASE+70-64)
#define EXTI2_SPI1_IRQ				(LS2K301_EXTIRQ2_BASE+71-64)
#define EXTI2_EHCI_IRQ				(LS2K301_EXTIRQ2_BASE+72-64)
#define EXTI2_OHCI_IRQ				(LS2K301_EXTIRQ2_BASE+73-64)
#define EXTI2_OTG_IRQ				(LS2K301_EXTIRQ2_BASE+74-64)
#define EXTI2_GMAC0_IRQ				(LS2K301_EXTIRQ2_BASE+75-64)
#define EXTI2_GMAC1_IRQ				(LS2K301_EXTIRQ2_BASE+76-64)
#define EXTI2_DC_IRQ				(LS2K301_EXTIRQ2_BASE+77-64)
#define EXTI2_THSENS_IRQ			(LS2K301_EXTIRQ2_BASE+78-64)
#define EXTI2_GPIO_0_3_IRQ			(LS2K301_EXTIRQ2_BASE+79-64)
#define EXTI2_GPIO_4_7_IRQ			(LS2K301_EXTIRQ2_BASE+80-64)
#define EXTI2_GPIO_8_11_IRQ			(LS2K301_EXTIRQ2_BASE+81-64)
#define EXTI2_GPIO_12_15_IRQ		(LS2K301_EXTIRQ2_BASE+82-64)
#define EXTI2_GPIO_16_19_IRQ		(LS2K301_EXTIRQ2_BASE+83-64)
#define EXTI2_GPIO_20_23_IRQ		(LS2K301_EXTIRQ2_BASE+84-64)
#define EXTI2_GPIO_24_27_IRQ		(LS2K301_EXTIRQ2_BASE+85-64)
#define EXTI2_GPIO_28_31_IRQ		(LS2K301_EXTIRQ2_BASE+86-64)
#define EXTI2_GPIO_32_35_IRQ		(LS2K301_EXTIRQ2_BASE+87-64)
#define EXTI2_GPIO_36_39_IRQ		(LS2K301_EXTIRQ2_BASE+88-64)
#define EXTI2_GPIO_40_43_IRQ		(LS2K301_EXTIRQ2_BASE+89-64)
#define EXTI2_GPIO_44_47_IRQ		(LS2K301_EXTIRQ2_BASE+90-64)
#define EXTI2_GPIO_48_51_IRQ		(LS2K301_EXTIRQ2_BASE+91-64)
#define EXTI2_GPIO_52_55_IRQ		(LS2K301_EXTIRQ2_BASE+92-64)
#define EXTI2_GPIO_56_59_IRQ		(LS2K301_EXTIRQ2_BASE+93-64)
#define EXTI2_GPIO_60_63_IRQ		(LS2K301_EXTIRQ2_BASE+94-64)
#define EXTI2_GPIO_64_67_IRQ		(LS2K301_EXTIRQ2_BASE+95-64)

#define LS2K301_EXTIRQ3_BASE        (LS2K301_EXTIRQ2_BASE+32)   // 176

#define EXTI3_GPIO_68_71_IRQ		(LS2K301_EXTIRQ3_BASE+96-96)
#define EXTI3_GPIO_72_75_IRQ		(LS2K301_EXTIRQ3_BASE+97-96)
#define EXTI3_GPIO_76_79_IRQ		(LS2K301_EXTIRQ3_BASE+98-96)
#define EXTI3_GPIO_80_83_IRQ		(LS2K301_EXTIRQ3_BASE+99-96)
#define EXTI3_GPIO_84_87_IRQ		(LS2K301_EXTIRQ3_BASE+100-96)
#define EXTI3_GPIO_88_91_IRQ		(LS2K301_EXTIRQ3_BASE+101-96)
#define EXTI3_GPIO_92_95_IRQ		(LS2K301_EXTIRQ3_BASE+102-96)
#define EXTI3_GPIO_96_99_IRQ		(LS2K301_EXTIRQ3_BASE+103-96)
#define EXTI3_GPIO_100_103_IRQ		(LS2K301_EXTIRQ3_BASE+104-96)
#define EXTI3_GPIO_104_105_IRQ		(LS2K301_EXTIRQ3_BASE+105-96)
#define EXTI3_DDR_ECC0_IRQ			(LS2K301_EXTIRQ3_BASE+111-96)
#define EXTI3_DDR_ECC1_IRQ			(LS2K301_EXTIRQ3_BASE+112-96)

#define LS2K301_EXTIRQ_COUNT        (LS2K301_EXTIRQ3_BASE+12)	// 扩展中断总数

#endif // #if (!USE_EXTINT)

#endif // _LS2K301_IRQ_H

/*
 * @@ END
 */
 
